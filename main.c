// MISAEL HERNANDEZ SANDOVAL IECA4 --- CORRECCION EN LA SECUENCIA DE ENCENDIDO EN LOS LED

#include <stdio.h>
#include <stdint.h>
#include "MK64F12.h"

void delay(uint32_t delay);		// DEFINICION DE LA FUNCION DE RETARDO

int main(void) {
	// SE ACTIVA EL RELOJ DEL PERIFERICO, PUERTO B 0x400 Y DEL PUERTO E 0x2000 SIMULTANEAMENTE
		SIM->SCGC5 = 0x2400;

	//CONTROL DE REGISTRO DEL PIN DE PUERTOS B Y E
		PORTB->PCR[21] = 0x00000100;	//SE CONFIGURA EL REGISTRO PRC DEL PUERTO B PIN 21
		PORTB->PCR[22] = 0x00000100;	//SE CONFIGURA EL REGISTRO PRC DEL PUERTO B PIN 22
		PORTE->PCR[26] = 0x00000100;	//SE CONFIGURA EL REGISTRO PRC DEL PUERTO E PIN 26

	//CONTROL DEL REGISTRO DE SALIDA
		GPIOB->PDOR = 0x00600000;	//SE CONFIGURA, DE FORMA LOGICA, EL PUERTO B PIN 21 Y 22 COMO SALIDA
								    //PIN 21 0x00200000 Y PIN 22 0x00400000
		GPIOE->PDOR = 0x04000000;   //SE CONFIGURA, DE FORMA LOGICA, EL PUERTO E PIN 26 COMO SALIDA
									//PIN 26 0X04000000


	//CONTROL DE DIRECCION DE SALIDA
		GPIOB->PDDR = 0x00600000;   //SE CONFIGURA, DE FORMA FISICA, EL PUERTO B PIN 21 Y 22 COMO SALIDA
									//PIN 21 0x00200000 Y PIN 22 0x00400000
		GPIOE->PDDR = 0x04000000;   //SE CONFIGURA, DE FORMA FISICA, EL PUERTO E PIN 26 COMO SALIDA
									//PIN 26 0X04000000

	    while(1) {					// BUCLE INFINITO

			GPIOB->PDOR = 0x00000000;	//SECUENCIA DE ENCENDIDO Y APAGADO DE LED RGB PUERTO B PIN 21
			GPIOB->PDOR = 0x04600000;	//SUMA TODOS LOS BITS DE LOR REGISTROS
			delay(1000000);
			GPIOB->PDOR= 0x00400000;	//AZUL
			delay(1000000);

			GPIOB->PDOR = 0x00000000;	//SECUENCIA DE ENCENDIDO Y APAGADO DE LED RGB PUERTO B PIN 22
			GPIOB->PDOR = 0x04600000;	//SUMA TODOS LOS BITS DE LOR REGISTROS
			delay(1000000);
			GPIOB->PDOR= 0x00200000;	//ROJO
			delay(1000000);

			GPIOE->PDOR = 0x00000000; 	//SECUENCIA DE ENCENDIDO Y APAGADO DE LED RGB PUERTO E PIN 26
			GPIOB->PDOR = 0x04600000;	//SUMA TODOS LOS BITS DE LOR REGISTROS
			delay(1000000);
			GPIOE->PDOR= 0x04000000;	//VERDE
			delay(1000000);
	    }

    return 0;
}

void delay(uint32_t delay){	//DECLRARACION DE LA FUNCION DE RETARDO
	volatile uint32_t i;	//DECLARACION DE LA VARIABLE i CON EL MODIFICADOR
							//volatile PARA COMPILACION
	for (i = 0; i < delay; ++i) {
	}
}
